import{b as c,u as H,d as I,j as r,P,t as B,C,e as $,E as D,f as W,T as G,h as w}from"./index-9aOjbyuJ.js";class p{constructor(t=0,s="Network Error"){this.status=t,this.text=s}}const K=()=>{if(!(typeof localStorage>"u"))return{get:e=>Promise.resolve(localStorage.getItem(e)),set:(e,t)=>Promise.resolve(localStorage.setItem(e,t)),remove:e=>Promise.resolve(localStorage.removeItem(e))}},o={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:K()},S=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},X=(e,t="https://api.emailjs.com")=>{if(!e)return;const s=S(e);o.publicKey=s.publicKey,o.blockHeadless=s.blockHeadless,o.storageProvider=s.storageProvider,o.blockList=s.blockList,o.limitRate=s.limitRate,o.origin=s.origin||t},R=async(e,t,s={})=>{const a=await fetch(o.origin+e,{method:"POST",headers:s,body:t}),n=await a.text(),i=new p(a.status,n);if(a.ok)return i;throw i},T=(e,t,s)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||typeof s!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},z=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},E=e=>e.webdriver||!e.languages||e.languages.length===0,M=()=>new p(451,"Unavailable For Headless Browser"),J=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},U=e=>{var t;return!((t=e.list)!=null&&t.length)||!e.watchVariable},Y=(e,t)=>e instanceof FormData?e.get(t):e[t],N=(e,t)=>{if(U(e))return!1;J(e.list,e.watchVariable);const s=Y(t,e.watchVariable);return typeof s!="string"?!1:e.list.includes(s)},L=()=>new p(403,"Forbidden"),Q=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a non-empty string"},Z=async(e,t,s)=>{const a=Number(await s.get(e)||0);return t-Date.now()+a},O=async(e,t,s)=>{if(!t.throttle||!s)return!1;Q(t.throttle,t.id);const a=t.id||e;return await Z(a,t.throttle,s)>0?!0:(await s.set(a,Date.now().toString()),!1)},q=()=>new p(429,"Too Many Requests"),ee=async(e,t,s,a)=>{const n=S(a),i=n.publicKey||o.publicKey,m=n.blockHeadless||o.blockHeadless,l=n.storageProvider||o.storageProvider,h={...o.blockList,...n.blockList},u={...o.limitRate,...n.limitRate};return m&&E(navigator)?Promise.reject(M()):(T(i,e,t),z(s),s&&N(h,s)?Promise.reject(L()):await O(location.pathname,u,l)?Promise.reject(q()):R("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:i,service_id:e,template_id:t,template_params:s}),{"Content-type":"application/json"}))},te=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},se=e=>typeof e=="string"?document.querySelector(e):e,re=async(e,t,s,a)=>{const n=S(a),i=n.publicKey||o.publicKey,m=n.blockHeadless||o.blockHeadless,l=o.storageProvider||n.storageProvider,h={...o.blockList,...n.blockList},u={...o.limitRate,...n.limitRate};if(m&&E(navigator))return Promise.reject(M());const b=se(s);T(i,e,t),te(b);const d=new FormData(b);return N(h,d)?Promise.reject(L()):await O(location.pathname,u,l)?Promise.reject(q()):(d.append("lib_version","4.4.1"),d.append("service_id",e),d.append("template_id",t),d.append("user_id",i),R("/api/v1.0/email/send-form",d))},ae={init:X,send:ee,sendForm:re,EmailJSResponseStatus:p},ne="/mayesh-portfolio-island.github.io/assets/fox-W5Giziuq.glb",ie=({currentAnimation:e,...t})=>{const s=c.useRef(),{nodes:a,materials:n,animations:i}=H(ne),{actions:m}=I(i,s);return c.useEffect(()=>{Object.values(m).forEach(l=>l.stop()),e&&m[e].play()},[m,e]),r.jsx("group",{ref:s,...t,dispose:null,children:r.jsxs("group",{name:"Sketchfab_Scene",children:[r.jsx("primitive",{object:a.GLTF_created_0_rootJoint}),r.jsx("skinnedMesh",{name:"Object_7",geometry:a.Object_7.geometry,material:n.PaletteMaterial001,skeleton:a.Object_7.skeleton}),r.jsx("skinnedMesh",{name:"Object_8",geometry:a.Object_8.geometry,material:n.PaletteMaterial001,skeleton:a.Object_8.skeleton}),r.jsx("skinnedMesh",{name:"Object_9",geometry:a.Object_9.geometry,material:n.PaletteMaterial001,skeleton:a.Object_9.skeleton}),r.jsx("skinnedMesh",{name:"Object_10",geometry:a.Object_10.geometry,material:n.PaletteMaterial001,skeleton:a.Object_10.skeleton}),r.jsx("skinnedMesh",{name:"Object_11",geometry:a.Object_11.geometry,material:n.PaletteMaterial001,skeleton:a.Object_11.skeleton})]})})},oe=()=>{const[e,t]=c.useState({show:!1,text:"",type:"danger"});return{alert:e,showAlert:({text:n,type:i="danger"})=>t({show:!0,text:n,type:i}),hideAlert:()=>t({show:!1,text:"",type:"danger"})}},F=({type:e,text:t})=>r.jsx("div",{className:"absolute top-10 left-0 right-0 flex justify-center items-center",children:r.jsxs("div",{className:`${e==="danger"?"bg-red-800":"bg-blue-800"} px-4 py-2 text-indigo-100 leading-none lg:rounded-full flex lg:inline-flex items-center`,role:"alert",children:[r.jsx("p",{className:`${e==="danger"?"bg-red-500":"bg-blue-500"} flex rounded-full uppercase px-2 py-1 font-semibold mr-3`,children:e==="danger"?"Failed":"Success"}),r.jsx("p",{className:"font-semibold mr-2 text-left",children:t})]})});F.propTypes={type:P.oneOf(["success","danger","warning","info"]).isRequired,text:P.string.isRequired};const le=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,ce=/^[a-zA-Z\s\-']{2,50}$/,me=/^.{10,1000}$/,_={MAX_REQUESTS:3,WINDOW_MS:6e4},de=e=>e?le.test(e)?null:"Please enter a valid email address":"Email is required",ue=e=>e?ce.test(e)?null:"Name should be 2-50 characters and contain only letters, spaces, hyphens, and apostrophes":"Name is required",he=e=>e?me.test(e)?null:"Message should be between 10 and 1000 characters":"Message is required",ge=e=>typeof e!="string"?e:e.replace(/[<>]/g,"").trim();class fe{constructor(){this.requests=new Map}isAllowed(t){const s=Date.now(),n=(this.requests.get(t)||[]).filter(i=>s-i<_.WINDOW_MS);return n.length>=_.MAX_REQUESTS?!1:(n.push(s),this.requests.set(t,n),!0)}getRemainingTime(t){const s=this.requests.get(t)||[];if(s.length===0)return 0;const a=Math.min(...s),n=Date.now()-a;return Math.max(0,_.WINDOW_MS-n)}}const be=e=>{const t={};return t.name=ue(e.name),t.email=de(e.email),t.message=he(e.message),Object.keys(t).forEach(s=>{t[s]===null&&delete t[s]}),{isValid:Object.keys(t).length===0,errors:t}},xe=()=>{const[e,t]=c.useState({name:"",email:"",message:""}),[s,a]=c.useState({}),[n,i]=c.useState(!1),[m,l]=c.useState("idle"),{alert:h,showAlert:u,hideAlert:b}=oe();c.useRef(null);const d=c.useRef(new fe);c.useEffect(()=>{B("contact")},[]);const k=v=>{const{name:g,value:y}=v.target,f=ge(y);t({...e,[g]:f}),s[g]&&a(V=>({...V,[g]:null}))},x=()=>l("walk"),j=()=>l("idle"),A=v=>{v.preventDefault();const g=be(e);if(!g.isValid){a(g.errors),u({text:"Please fix the errors in the form.",type:"danger"}),w("contact",!1,"Validation failed");return}const y=e.email;if(!d.current.isAllowed(y)){const f=d.current.getRemainingTime(y);u({text:`Too many requests. Please wait ${Math.ceil(f/1e3)} seconds before trying again.`,type:"danger"}),w("contact",!1,"Rate limited");return}i(!0),l("hit"),ae.send("service_5hejvbr","template_bgfskj8",{from_name:e.name,to_name:"Mayesh",from_email:e.email,to_email:"mayeshdani2108@gmail.com",message:e.message},"eWN9xm9Yo0S0PPYXP").then(()=>{i(!1),u({text:"Thank you. I will get back to you as soon as possible.",type:"success"}),w("contact",!0),setTimeout(()=>{b(),l("idle"),t({name:"",email:"",message:""}),a({})},3e3)}).catch(f=>{i(!1),console.log(f),l("idle"),u({text:"I didn't receive your message. Please try again later.",type:"danger"}),w("contact",!1,f.message)})};return r.jsxs("section",{className:"relative flex lg:flex-row flex-col max-container h-[100vh]",children:[h.show&&r.jsx(F,{...h}),r.jsxs("div",{className:"flex-1 min-w-[50%] flex flex-col",children:[r.jsx("h1",{className:"head-text",children:"Get in touch"}),r.jsxs("form",{className:"w-full flex flex-col gap-7 mt-14",onSubmit:A,children:[r.jsxs("label",{className:"text-black-500 font-semibold",children:["Name",r.jsx("input",{type:"text",name:"name",className:`input ${s.name?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`,placeholder:"John Doe",value:e.name,onChange:k,onFocus:x,onBlur:j,required:!0}),s.name&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.name})]}),r.jsxs("label",{className:"text-black-500 font-semibold",children:["Email",r.jsx("input",{type:"email",name:"email",className:`input ${s.email?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`,placeholder:"john@gmail.com",value:e.email,onChange:k,onFocus:x,onBlur:j,required:!0}),s.email&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.email})]}),r.jsxs("label",{className:"text-black-500 font-semibold",children:["Your Message",r.jsx("textarea",{name:"message",rows:4,className:`textarea ${s.message?"border-red-500 focus:border-red-500 focus:ring-red-500":""}`,placeholder:"Let me know how I can help you!",value:e.message,onChange:k,onFocus:x,onBlur:j,required:!0}),s.message&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.message})]}),r.jsx("button",{type:"submit",className:"btn",disabled:n,onFocus:x,onBlur:j,children:n?"Sending...":"Send Message"})]})]}),r.jsx("div",{className:"lg:w-1/2 w-full lg:h-auto md:h-[550px] h-[350px] relative",children:r.jsxs(C,{camera:$(),children:[r.jsx("directionalLight",{intensity:2.5,position:[0,0,1]}),r.jsx("ambientLight",{intensity:.5}),r.jsx(c.Suspense,{fallback:r.jsx(G,{}),children:r.jsx(D,{children:r.jsx(ie,{currentAnimation:m,...W()})})})]})})]})};export{xe as default};
